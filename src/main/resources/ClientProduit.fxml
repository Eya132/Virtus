<?xml version="1.0" encoding="UTF-8"?>


<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import org.controlsfx.control.RangeSlider?>

<?import javafx.scene.layout.StackPane?>
<AnchorPane prefHeight="662.0" prefWidth="850.0" style="-fx-background-color: #FFFFFF;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="GestionBoutiqueONLINE.controllers.ClientProduitController">

    <children>
        <!-- HBox contenant le bouton "Consulter mes commandes" -->
        <HBox alignment="TOP_RIGHT" spacing="10" style="-fx-padding: 10;" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0">
            <Button onAction="#consulterCommandes" style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-size: 14px; -fx-min-width: 180; -fx-min-height: 30;" text="Consulter mes commandes">
                <font>
                    <Font name="Copperplate Gothic Bold" size="13.0" />
                </font>
            </Button>
        </HBox>
        <StackPane>
            <!-- Bouton avec l'icône du panier -->
            <Button onAction="#afficherPanier" style="-fx-background-color: transparent; -fx-border-color: transparent;">
                <graphic>
                    <ImageView fitHeight="40.0" fitWidth="40.0" preserveRatio="true">
                        <Image url="@/icones/voirPanier.png" />
                    </ImageView>
                </graphic>
            </Button>

            <!-- Label pour afficher le nombre d'articles dans le panier -->
            <Label fx:id="panierCountLabel" text="0" style="-fx-text-fill: white; -fx-font-size: 10px; -fx-font-weight: bold; -fx-background-color: red; -fx-background-radius: 50%; -fx-padding: 2 5 2 5;" />
        </StackPane>

        <!-- Section de recherche -->
        <HBox alignment="CENTER" spacing="10" style="-fx-padding: 10;" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="50">
            <TextField fx:id="searchField" promptText="Rechercher un produit..." style="-fx-font-size: 14px; -fx-pref-width: 300px;" />
        </HBox>

        <!-- ListView pour les suggestions (centrée) -->
        <VBox alignment="CENTER" spacing="15" style="-fx-padding: 10;" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="100">
            <ListView fx:id="suggestionsList" prefWidth="100.0" prefHeight="100.0" visible="false" />
        </VBox>

        <!-- Section des filtres à gauche -->
        <VBox spacing="20" style="-fx-padding: 10;" AnchorPane.leftAnchor="10" AnchorPane.topAnchor="200" AnchorPane.bottomAnchor="10" prefWidth="200">
            <!-- Filtre par prix -->
            <Label text="Prix" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
            <HBox spacing="10" prefWidth="220">
                <Label fx:id="minPriceLabel" text="0 TND"  style="-fx-font-size: 12px; -fx-min-width: 60px; -fx-alignment: CENTER-RIGHT;"/>
                <RangeSlider fx:id="priceRangeSlider" min="0" max="10000" lowValue="0" highValue="1000" showTickLabels="true" showTickMarks="true"  />
                <Label fx:id="maxPriceLabel" text="1000 TND"  style="-fx-font-size: 12px;  -fx-min-width: 60px; -fx-alignment: CENTER-LEFT;" />
            </HBox>

            <!-- Filtre par catégorie -->
            <Label text="Catégories" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
            <VBox spacing="5">
                <CheckBox text="Vêtements" userData="VETEMENTS" onAction="#handleCategoryFilter" />
                <CheckBox text="Nutrition" userData="NUTRITION" onAction="#handleCategoryFilter" />
                <CheckBox text="Sport" userData="SPORT" onAction="#handleCategoryFilter" />
            </VBox>
            <HBox spacing="10" style="-fx-padding: 10;" AnchorPane.leftAnchor="10" AnchorPane.topAnchor="150">
                <Button  onAction="#convertirEnEUR" style="-fx-background-color: transparent; -fx-border-color: transparent;" >
                    <graphic>
                        <ImageView fitHeight="40.0" fitWidth="40.0" preserveRatio="true">
                            <Image url="@/icones/euro.png" />
                        </ImageView>
                    </graphic>
                </Button>
                <Button  onAction="#convertirEnUSD" style="-fx-background-color: transparent; -fx-border-color: transparent;"  >
                    <graphic>
                        <ImageView fitHeight="40.0" fitWidth="40.0" preserveRatio="true">
                            <Image url="@/icones/dollar.png" />
                        </ImageView>
                    </graphic>
                </Button>

                <Button text="Revenir à TND" onAction="#revenirEnTND" style="-fx-background-color: transparent; -fx-border-color: transparent;"  >
                    <graphic>
                        <ImageView fitHeight="40.0" fitWidth="40.0" preserveRatio="true">
                            <Image url="@/icones/TND.png" />
                        </ImageView>
                    </graphic>

                </Button>
            </HBox>
        </VBox>

        <!-- Section des produits à droite -->
        <ScrollPane fitToHeight="true" fitToWidth="true" prefHeight="600.0" prefWidth="600.0" style="-fx-background-color: transparent;" AnchorPane.leftAnchor="220" AnchorPane.rightAnchor="20" AnchorPane.topAnchor="200" AnchorPane.bottomAnchor="10">
            <content>
                <FlowPane fx:id="produitsContainer" hgap="20" prefHeight="527.0" prefWidth="580.0" style="-fx-padding: 20;" vgap="20" />

            </content>
        </ScrollPane>
    </children>
</AnchorPane>